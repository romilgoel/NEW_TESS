<!DOCTYPE html>
<html>
	<title>&nbsp;</title>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
		<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="cordova/cordova.js"></script>
		<script>
		
		document.addEventListener("deviceready", onDeviceReady, false);
 			function onDeviceReady() 
 			{
		    $.ajax({
				url : 	"https://bssqa1.tallysolutions.com/isrel45_00/modules/hrms/intranet/reports/GetCount.php",
				data : {
							strUserEventID:103,
							strBirthDayListSize : 10
							
					    },
				beforeSend : function(){
					$.mobile.loading( 'show');
				},
				error : function(){
					alert("Error occured");
				},
				success : function(data){
					console.log(data);
					data = eval(data);
					var i = 0;
					var BirthdayStr = "";
					var BirthDate = data[0][0];
					BirthdayStr += "<li data-role='list-divider' role='heading'>"+data[0][0]+"</li>";
					for( i = 0 ;i < data.length; i++)
					{
						if(BirthDate != data[i][0])
						{
							BirthDate = data[i][0];
							BirthdayStr += "<li data-role='list-divider' role='heading'><p class='ui-li-desc'>"+data[i][0]+"</p></li>";
						}
							
						BirthdayStr += "<li><a href='#'>"+data[i][1]+"</a></li>";
							
					}
					$(".BirthDayList").html(BirthdayStr);
					$('.BirthDayList').listview('refresh');
					$.mobile.loading( 'hide');
					
				} 
		
		          });
	          }
	          
	          $(".ClassGetBirthdays").live("click",function(){
	          	alert(1);
	          	onDeviceReady();
	          });
		</script>
	</head>
	<body>
		
		<div data-role="page">
			 
			<div data-role="header"><h1>B'Days</h1></div>
			 
			<div data-role="content">
				
				<ul data-role="listview" class="BirthDayList">
					
				<li><a href="#" class="ClassGetBirthdays">Tap me if dont get thelist.</a></li>
				</ul>
				<button onclick="onDeviceReady()">Get Birthays</button>
					
				
			</div>
			
			 
		</div>

	</body>
</html>
